<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html prefix="dp2: http://www.daisy.org/ns/pipeline/">
<head>
<link rev="dp2:doc" href="pef-preview.xsl">
<link rel="rdf:type" href="http://www.daisy.org/ns/pipeline/source">
<style type="text/css">
						.code {
						  white-space: pre;
						  font-family: monospace;
						}
						.code-xml-element-local-name {
						  color: #1d58d0;
						}
						.code-xml-attribute-local-name {
						  color: #dca000;
						}
						.code-xml-attribute-value {
						  color: #2994a1;
						}
						.code-xml-element-prefix,
						.code-xml-attribute-prefix {
						  color: #9030b0;
						}
					</style>
</head>
<body><div class="code">&lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">stylesheet</span> <span class="code-xml-attribute-local-name">exclude-result-prefixes</span>=<span class="code-xml-attribute-value">"#all"</span> <span class="code-xml-attribute-local-name">version</span>=<span class="code-xml-attribute-value">"2.0"</span>&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">output</span> <span class="code-xml-attribute-local-name">method</span>=<span class="code-xml-attribute-value">"html"</span> <span class="code-xml-attribute-local-name">encoding</span>=<span class="code-xml-attribute-value">"UTF-8"</span>/&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">param</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"table"</span>/&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">template</span> <span class="code-xml-attribute-local-name">match</span>=<span class="code-xml-attribute-value">"/"</span>&gt;
        &lt;<span class="code-xml-element-local-name">html</span>&gt;
            &lt;<span class="code-xml-element-local-name">head</span>&gt;
                &lt;<span class="code-xml-element-local-name">meta</span> <span class="code-xml-attribute-local-name">http-equiv</span>=<span class="code-xml-attribute-value">"Content-Type"</span> <span class="code-xml-attribute-local-name">content</span>=<span class="code-xml-attribute-value">"text/html; charset=UTF-8"</span>/&gt;
                &lt;<span class="code-xml-element-local-name">style</span> <span class="code-xml-attribute-local-name">type</span>=<span class="code-xml-attribute-value">"text/css"</span>&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">value-of</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"unparsed-text('pef-preview.css', 'utf-8')"</span>/&gt;
                &lt;/<span class="code-xml-element-local-name">style</span>&gt;
                &lt;<span class="code-xml-element-local-name">script</span> <span class="code-xml-attribute-local-name">type</span>=<span class="code-xml-attribute-value">"text/javascript"</span>&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">value-of</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"unparsed-text('pef-preview.js', 'utf-8')"</span>/&gt;
                &lt;/<span class="code-xml-element-local-name">script</span>&gt;
            &lt;/<span class="code-xml-element-local-name">head</span>&gt;
            &lt;<span class="code-xml-element-local-name">body</span>&gt;
                &lt;<span class="code-xml-element-local-name">div</span> <span class="code-xml-attribute-local-name">id</span>=<span class="code-xml-attribute-value">"header"</span>&gt;
                    &lt;<span class="code-xml-element-local-name">h1</span>&gt;
                        &lt;<span class="code-xml-element-local-name">span</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"label"</span>&gt;title&lt;/<span class="code-xml-element-local-name">span</span>&gt;
                        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"string(/pef:pef/pef:head/pef:meta/dc:title)"</span>/&gt;
                    &lt;/<span class="code-xml-element-local-name">h1</span>&gt;
                    &lt;<span class="code-xml-element-local-name">h2</span>&gt;
                        &lt;<span class="code-xml-element-local-name">span</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"label"</span>&gt;creator&lt;/<span class="code-xml-element-local-name">span</span>&gt;
                        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"string(/pef:pef/pef:head/pef:meta/dc:creator)"</span>/&gt;
                    &lt;/<span class="code-xml-element-local-name">h2</span>&gt;
                    &lt;<span class="code-xml-element-local-name">div</span> <span class="code-xml-attribute-local-name">id</span>=<span class="code-xml-attribute-value">"view-buttons"</span>&gt;
                        &lt;<span class="code-xml-element-local-name">button</span> <span class="code-xml-attribute-local-name">id</span>=<span class="code-xml-attribute-value">"view-braille"</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"active"</span> <span class="code-xml-attribute-local-name">onclick</span>=<span class="code-xml-attribute-value">"toggleView()"</span>&gt;Braille&lt;/<span class="code-xml-element-local-name">button</span>&gt;
                        &lt;<span class="code-xml-element-local-name">button</span> <span class="code-xml-attribute-local-name">id</span>=<span class="code-xml-attribute-value">"view-text"</span> <span class="code-xml-attribute-local-name">onclick</span>=<span class="code-xml-attribute-value">"toggleView()"</span>&gt;Text&lt;/<span class="code-xml-element-local-name">button</span>&gt;
                        &lt;<span class="code-xml-element-local-name">button</span> <span class="code-xml-attribute-local-name">id</span>=<span class="code-xml-attribute-value">"view-metadata"</span> <span class="code-xml-attribute-local-name">onclick</span>=<span class="code-xml-attribute-value">"toggleMetadata()"</span>&gt;Metadata&lt;/<span class="code-xml-element-local-name">button</span>&gt;
                    &lt;/<span class="code-xml-element-local-name">div</span>&gt;
                    &lt;<span class="code-xml-element-local-name">ul</span> <span class="code-xml-attribute-local-name">id</span>=<span class="code-xml-attribute-value">"metadata"</span>&gt;
                        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">for-each</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"/pef:pef/pef:head/pef:meta/dc:*[not(local-name()=('title','creator'))]"</span>&gt;
                            &lt;<span class="code-xml-element-local-name">li</span>&gt;
                                &lt;<span class="code-xml-element-local-name">span</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"label"</span>&gt;&lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"local-name(.)"</span>/&gt;&lt;/<span class="code-xml-element-local-name">span</span>&gt;
                                &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"string(.)"</span>/&gt;
                            &lt;/<span class="code-xml-element-local-name">li</span>&gt;
                        &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">for-each</span>&gt;
                    &lt;/<span class="code-xml-element-local-name">ul</span>&gt;
                &lt;/<span class="code-xml-element-local-name">div</span>&gt;
                &lt;<span class="code-xml-element-local-name">ul</span> <span class="code-xml-attribute-local-name">id</span>=<span class="code-xml-attribute-value">"nav"</span>&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">for-each</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"/pef:pef//pef:page"</span>&gt;
                        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"i"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"format-number(position(), '0')"</span>/&gt;
                        &lt;<span class="code-xml-element-local-name">li</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"nav-page"</span>&gt;
                            &lt;<span class="code-xml-element-local-name">a</span> <span class="code-xml-attribute-local-name">href</span>=<span class="code-xml-attribute-value">"{concat('#page', $i)}"</span>&gt;
                                &lt;<span class="code-xml-element-local-name">div</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"page-number"</span>&gt;
                                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">value-of</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"$i"</span>/&gt;
                                &lt;/<span class="code-xml-element-local-name">div</span>&gt;
                                &lt;<span class="code-xml-element-local-name">div</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"page"</span>&gt;
                                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">for-each</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"pef:row"</span>&gt;
                                        &lt;<span class="code-xml-element-local-name">div</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"row"</span>&gt;&lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"string(.)"</span>/&gt;&lt;/<span class="code-xml-element-local-name">div</span>&gt;
                                    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">for-each</span>&gt;
                                &lt;/<span class="code-xml-element-local-name">div</span>&gt;
                            &lt;/<span class="code-xml-element-local-name">a</span>&gt;
                        &lt;/<span class="code-xml-element-local-name">li</span>&gt;
                    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">for-each</span>&gt;
                &lt;/<span class="code-xml-element-local-name">ul</span>&gt;
                &lt;<span class="code-xml-element-local-name">div</span> <span class="code-xml-attribute-local-name">id</span>=<span class="code-xml-attribute-value">"main"</span>&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">for-each</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"/pef:pef//pef:page"</span>&gt;
                        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"i"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"format-number(position(), '0')"</span>/&gt;
                        &lt;<span class="code-xml-element-local-name">span</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"bookmark"</span> <span class="code-xml-attribute-local-name">id</span>=<span class="code-xml-attribute-value">"{concat('page', $i)}"</span>&gt; &lt;/<span class="code-xml-element-local-name">span</span>&gt;
                        &lt;<span class="code-xml-element-local-name">div</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"page"</span>&gt;
                            &lt;<span class="code-xml-element-local-name">div</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"braille-page"</span>&gt;
                                &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">for-each</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"pef:row"</span>&gt;
                                    &lt;<span class="code-xml-element-local-name">div</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"row"</span>&gt;&lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"string(.)"</span>/&gt;&lt;/<span class="code-xml-element-local-name">div</span>&gt;
                                &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">for-each</span>&gt;
                            &lt;/<span class="code-xml-element-local-name">div</span>&gt;
                            &lt;<span class="code-xml-element-local-name">div</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"text-page"</span>&gt;
                                &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">for-each</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"pef:row"</span>&gt;
                                    &lt;<span class="code-xml-element-local-name">div</span> <span class="code-xml-attribute-local-name">class</span>=<span class="code-xml-attribute-value">"row"</span>&gt;&lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"pef:encode($table, string(.))"</span>/&gt;&lt;/<span class="code-xml-element-local-name">div</span>&gt;
                                &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">for-each</span>&gt;
                            &lt;/<span class="code-xml-element-local-name">div</span>&gt;
                        &lt;/<span class="code-xml-element-local-name">div</span>&gt;
                    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">for-each</span>&gt;
                &lt;/<span class="code-xml-element-local-name">div</span>&gt;
            &lt;/<span class="code-xml-element-local-name">body</span>&gt;
        &lt;/<span class="code-xml-element-local-name">html</span>&gt;
    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">template</span>&gt;
    
&lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">stylesheet</span>&gt;</div></body>
</html>
