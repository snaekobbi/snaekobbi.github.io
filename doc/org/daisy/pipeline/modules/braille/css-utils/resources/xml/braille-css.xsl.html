<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html prefix="dp2: http://www.daisy.org/ns/pipeline/">
<head>
<link rev="dp2:doc" href="braille-css.xsl">
<link rel="rdf:type" href="http://www.daisy.org/ns/pipeline/source">
<style type="text/css">
						.code {
						  white-space: pre;
						  font-family: monospace;
						}
						.code-xml-element-local-name {
						  color: #1d58d0;
						}
						.code-xml-attribute-local-name {
						  color: #dca000;
						}
						.code-xml-attribute-value {
						  color: #2994a1;
						}
						.code-xml-element-prefix,
						.code-xml-attribute-prefix {
						  color: #9030b0;
						}
					</style>
</head>
<body><div class="code">&lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">stylesheet</span> <span class="code-xml-attribute-local-name">exclude-result-prefixes</span>=<span class="code-xml-attribute-value">"#all"</span> <span class="code-xml-attribute-local-name">version</span>=<span class="code-xml-attribute-value">"2.0"</span>&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">import</span> <span class="code-xml-attribute-local-name">href</span>=<span class="code-xml-attribute-value">"<a href="base.xsl.html" class="source">base.xsl</a>"</span>/&gt;
    
    
    
    
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:properties"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string*"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"('display',                  'flow',                  'left',                  'right',                  'margin-left',                  'margin-right',                  'margin-top',                  'margin-bottom',                  'padding-left',                  'padding-right',                  'padding-bottom',                  'padding-top',                  'border-left',                  'border-right',                  'border-bottom',                  'border-top',                  'text-indent',                  'list-style-type',                  'text-align',                  'page-break-before',                  'page-break-after',                  'page-break-inside',                  'orphans',                  'widows',                  'page',                  'string-set',                  'counter-reset',                  'counter-set',                  'counter-increment',                  'content',                  'white-space',                  'hyphens',                  'size',                  'min-length',                  'max-length',                  'text-transform',                  'font-style',                  'font-weight',                  'text-decoration',                  'color',                  'line-height',                  'letter-spacing',                  'word-spacing')"</span>/&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:values"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string*"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"(re:exact(re:or(('block','inline','list-item','none','page-break',$css:VENDOR_PRF_IDENT_RE))),                  re:exact($css:IDENT_RE),                  re:exact(re:or(($css:NON_NEGATIVE_INTEGER_RE,'auto'))),                  re:exact(re:or(($css:NON_NEGATIVE_INTEGER_RE,'auto'))),                  re:exact($css:INTEGER_RE),                  re:exact($css:INTEGER_RE),                  re:exact($css:NON_NEGATIVE_INTEGER_RE),                  re:exact($css:NON_NEGATIVE_INTEGER_RE),                  re:exact($css:NON_NEGATIVE_INTEGER_RE),                  re:exact($css:NON_NEGATIVE_INTEGER_RE),                  re:exact($css:NON_NEGATIVE_INTEGER_RE),                  re:exact($css:NON_NEGATIVE_INTEGER_RE),                  re:exact(re:or(($css:BRAILLE_CHAR_RE,'none'))),                  re:exact(re:or(($css:BRAILLE_CHAR_RE,'none'))),                  re:exact(re:or(($css:BRAILLE_CHAR_RE,'none'))),                  re:exact(re:or(($css:BRAILLE_CHAR_RE,'none'))),                  re:exact($css:INTEGER_RE),                  re:exact($css:IDENT_RE),                  re:exact(re:or(('center','justify','left','right'))),                  re:exact(re:or(('always','auto','avoid','left','right'))),                  re:exact(re:or(('always','auto','avoid','left','right'))),                  re:exact(re:or(('auto','avoid'))),                  re:exact($css:INTEGER_RE),                  re:exact($css:INTEGER_RE),                  re:exact(re:or(($css:IDENT_RE,'auto'))),                  re:exact(re:or(('none',re:comma-separated($css:STRING_SET_PAIR_RE)))),                  re:exact(re:or(('none',re:space-separated($css:COUNTER_SET_PAIR_RE)))),                  re:exact(re:or(('none',re:space-separated($css:COUNTER_SET_PAIR_RE)))),                  re:exact(re:or(('none',re:space-separated($css:COUNTER_SET_PAIR_RE)))),                  re:exact(re:or(('none',$css:CONTENT_LIST_RE))),                  re:exact(re:or(('normal','pre-wrap','pre-line'))),                  re:exact(re:or(('auto','manual','none'))),                  re:exact(concat('(',$css:NON_NEGATIVE_INTEGER_RE,')\s+(',$css:NON_NEGATIVE_INTEGER_RE,')')),                  re:exact(re:or(($css:NON_NEGATIVE_INTEGER_RE,'auto'))),                  re:exact(re:or(($css:NON_NEGATIVE_INTEGER_RE,'auto'))),                  re:exact(re:or(($css:IDENT_LIST_RE,'auto','none'))),                  re:exact(re:or(('normal','italic','oblique'))),                  re:exact(re:or(('normal','bold','100','200','300','400','500','600','700','800','900'))),                  re:exact(re:or(('none','underline','overline','line-through','blink'))),                  re:exact($css:COLOR_RE),                  re:exact($css:NON_NEGATIVE_INTEGER_RE),                  re:exact($css:NON_NEGATIVE_INTEGER_RE),                  re:exact($css:NON_NEGATIVE_INTEGER_RE))"</span>/&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:applies-to"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string*"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"('.*',                  '.*',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '^(block|list-item)$',                  '.*',                  '.*',                  '.*',                  '.*',                  '.*',                  '^(::before|::after|@top-left|@top-center|@top-right|@bottom-left|@bottom-center|@bottom-right)$',                  '.*',                  '.*',                  '^@page$',                  '^@volume$',                  '^@volume$',                  '.*',                  '.*',                  '.*',                  '.*',                  '.*',                  '^(block|list-item)$',                  '.*',                  '.*')"</span>/&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:initial-values"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string*"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"('inline',                  'normal',                  'auto',                  'auto',                  '0',                  '0',                  '0',                  '0',                  '0',                  '0',                  '0',                  '0',                  'none',                  'none',                  'none',                  'none',                  '0',                  'none',                  'left',                  'auto',                  'auto',                  'auto',                  '0',                  '0',                  'auto',                  'none',                  'none',                  'none',                  'none',                  'none',                  'normal',                  'manual',                  '40 25',                  'auto',                  'auto',                  'auto',                  'normal',                  'normal',                  'none',                  '#000000',                  '1',                  '0',                  '1')"</span>/&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:media"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string*"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"('embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'embossed',                  'print',                  'print',                  'print',                  'print',                  'embossed',                  'embossed',                  'embossed')"</span>/&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:inherited-properties"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string*"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"('text-indent',                  'list-style-type',                  'text-align',                  'page',                  'white-space',                  'hyphens',                  'text-transform',                  'font-style',                  'font-weight',                  'text-decoration',                  'color',                  'line-height',                  'letter-spacing',                  'word-spacing')"</span>/&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:paged-media-properties"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string*"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"('page-break-before',                  'page-break-after',                  'page-break-inside',                  'orphans',                  'widows')"</span>/&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">function</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:is-valid"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:boolean"</span>&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">param</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:property"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"element()"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"index"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"index-of($css:properties, $css:property/@name)"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"if ($index)                               then $css:property/@value=('inherit', 'initial') or matches($css:property/@value, $css:values[$index], 'x')                               else matches($css:property/@name, re:exact($css:VENDOR_PRF_IDENT_RE))"</span>/&gt; 
    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">function</span>&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">function</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:initial-value"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string?"</span>&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">param</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"property"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"index"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"index-of($css:properties, $property)"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">if</span> <span class="code-xml-attribute-local-name">test</span>=<span class="code-xml-attribute-value">"$index"</span>&gt;
            &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"$css:initial-values[$index]"</span>/&gt;
        &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">if</span>&gt;
    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">function</span>&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">function</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:is-inherited"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:boolean"</span>&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">param</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"property"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"boolean(index-of($css:inherited-properties, $property))"</span>/&gt;
    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">function</span>&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">function</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:applies-to"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:boolean"</span>&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">param</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"property"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">param</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"display"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"index"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"index-of($css:properties, $property)"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"if ($index)                               then matches($display, $css:applies-to[$index])                               else matches($property, re:exact($css:VENDOR_PRF_IDENT_RE))"</span>/&gt; 
    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">function</span>&gt;
    
    
    
    
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">template</span> <span class="code-xml-attribute-local-name">match</span>=<span class="code-xml-attribute-value">"css:property[@name='text-transform']"</span> <span class="code-xml-attribute-local-name">mode</span>=<span class="code-xml-attribute-value">"css:compute"</span>&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">param</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"concretize-inherit"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:boolean"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">param</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"concretize-initial"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:boolean"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">param</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"validate"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:boolean"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">param</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"context"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"element()"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"parent"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"element()?"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"$context/ancestor::*[not(self::css:* except self::css:box)][1]"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">choose</span>&gt;
            &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span> <span class="code-xml-attribute-local-name">test</span>=<span class="code-xml-attribute-value">"@value='inherit'"</span>&gt;
                &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"."</span>/&gt;
            &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span>&gt;
            &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span> <span class="code-xml-attribute-local-name">test</span>=<span class="code-xml-attribute-value">"@value='none'"</span>&gt;
                &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"."</span>/&gt;
            &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span>&gt;
            &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span> <span class="code-xml-attribute-local-name">test</span>=<span class="code-xml-attribute-value">"not(exists($parent))"</span>&gt;
                &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"."</span>/&gt;
            &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span>&gt;
            &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">otherwise</span>&gt;
                &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"parent-computed"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"element()"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"css:computed-properties(@name, true(), true(), $validate, $parent)"</span>/&gt;
                &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">choose</span>&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span> <span class="code-xml-attribute-local-name">test</span>=<span class="code-xml-attribute-value">"@value=('initial','auto') and $parent-computed/@value='none'"</span>&gt;
                        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"."</span>/&gt;
                    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span>&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span> <span class="code-xml-attribute-local-name">test</span>=<span class="code-xml-attribute-value">"@value=('initial','auto')"</span>&gt;
                        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"$parent-computed"</span>/&gt;
                    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span>&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span> <span class="code-xml-attribute-local-name">test</span>=<span class="code-xml-attribute-value">"$parent-computed/@value=('auto','none')"</span>&gt;
                        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"."</span>/&gt;
                    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span>&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">otherwise</span>&gt;
                        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"css:property(@name, string-join(                                                 distinct-values((                                                   tokenize(normalize-space(@value), ' '),                                                   tokenize(normalize-space($parent-computed/@value), ' '))),                                                 ' '))"</span>/&gt;
                    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">otherwise</span>&gt;
                &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">choose</span>&gt;
            &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">otherwise</span>&gt;
        &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">choose</span>&gt;
    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">template</span>&gt;
    
    
    
    
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">function</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:counter-style"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"element()"</span>&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">param</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"name"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"style"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"element()?"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"(css:custom-counter-style($name),$css:predefined-counter-styles[@name=$name])[1]"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">choose</span>&gt;
            &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span> <span class="code-xml-attribute-local-name">test</span>=<span class="code-xml-attribute-value">"$style                             and ((($style/@system=('symbolic','alphabetic','numeric','cyclic','fixed')                                    or not($style/@system))                                   and $style/@symbols)                                  or ($style/@system='additive'                                      and $style/@additive-symbols))"</span>&gt;
                &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">element</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:counter-style"</span>&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">attribute</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"system"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"($style/@system,'symbolic')[1]"</span>/&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">choose</span>&gt;
                        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span> <span class="code-xml-attribute-local-name">test</span>=<span class="code-xml-attribute-value">"$style/@system='additive'"</span>&gt;
                            &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"$style/@additive-symbols"</span>/&gt;
                        &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span>&gt;
                        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">otherwise</span>&gt;
                            &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">sequence</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"$style/@symbols"</span>/&gt;
                        &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">otherwise</span>&gt;
                    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">choose</span>&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">if</span> <span class="code-xml-attribute-local-name">test</span>=<span class="code-xml-attribute-value">"$style/@system=('symbolic','alphabetic','numeric','additive') or not($style/@system)"</span>&gt;
                        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">attribute</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"negative"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"($style/@negative,'-')[1]"</span>/&gt;
                    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">if</span>&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">attribute</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"prefix"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"($style/@prefix,'')[1]"</span>/&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">attribute</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"suffix"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"($style/@suffix,'. ')[1]"</span>/&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">attribute</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"fallback"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"($style/@fallback,'. ')[1]"</span>/&gt;
                    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">attribute</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"text-transform"</span> <span class="code-xml-attribute-local-name">select</span>=<span class="code-xml-attribute-value">"($style/@text-transform,'auto')[1]"</span>/&gt;
                &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">element</span>&gt;
            &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">when</span>&gt;
            &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">otherwise</span>&gt;
                &lt;<span class="code-xml-element-prefix">css:</span><span class="code-xml-element-local-name">counter-style</span> <span class="code-xml-attribute-local-name">system</span>=<span class="code-xml-attribute-value">"numeric"</span> <span class="code-xml-attribute-local-name">symbols</span>=<span class="code-xml-attribute-value">"'0' '1' '2' '3' '4' '5' '6' '7' '8' '9'"</span> <span class="code-xml-attribute-local-name">negative</span>=<span class="code-xml-attribute-value">"-"</span> <span class="code-xml-attribute-local-name">prefix</span>=<span class="code-xml-attribute-value">""</span> <span class="code-xml-attribute-local-name">suffix</span>=<span class="code-xml-attribute-value">". "</span> <span class="code-xml-attribute-local-name">fallback</span>=<span class="code-xml-attribute-value">"decimal"</span> <span class="code-xml-attribute-local-name">text-transform</span>=<span class="code-xml-attribute-value">"auto"</span>/&gt;
            &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">otherwise</span>&gt;
        &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">choose</span>&gt;
    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">function</span>&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:predefined-counter-styles"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"element()*"</span>&gt;
        &lt;<span class="code-xml-element-prefix">css:</span><span class="code-xml-element-local-name">counter-style</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"decimal"</span> <span class="code-xml-attribute-local-name">system</span>=<span class="code-xml-attribute-value">"numeric"</span> <span class="code-xml-attribute-local-name">symbols</span>=<span class="code-xml-attribute-value">"'0' '1' '2' '3' '4' '5' '6' '7' '8' '9'"</span> <span class="code-xml-attribute-local-name">negative</span>=<span class="code-xml-attribute-value">"-"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">css:</span><span class="code-xml-element-local-name">counter-style</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"lower-alpha"</span> <span class="code-xml-attribute-local-name">system</span>=<span class="code-xml-attribute-value">"alphabetic"</span> <span class="code-xml-attribute-local-name">symbols</span>=<span class="code-xml-attribute-value">"'a' 'b' 'c' 'd' 'e' 'f' 'g' 'h' 'i' 'j' 'k' 'l' 'm' 'n' 'o' 'p' 'q' 'r' 's' 't' 'u' 'v' 'w' 'x' 'y' 'z'"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">css:</span><span class="code-xml-element-local-name">counter-style</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"upper-alpha"</span> <span class="code-xml-attribute-local-name">system</span>=<span class="code-xml-attribute-value">"alphabetic"</span> <span class="code-xml-attribute-local-name">symbols</span>=<span class="code-xml-attribute-value">"'A' 'B' 'C' 'D' 'E' 'F' 'G' 'H' 'I' 'J' 'K' 'L' 'M' 'N' 'O' 'P' 'Q' 'R' 'S' 'T' 'U' 'V' 'W' 'X' 'Y' 'Z'"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">css:</span><span class="code-xml-element-local-name">counter-style</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"lower-roman"</span> <span class="code-xml-attribute-local-name">system</span>=<span class="code-xml-attribute-value">"additive"</span> <span class="code-xml-attribute-local-name">range</span>=<span class="code-xml-attribute-value">"1 3999"</span> <span class="code-xml-attribute-local-name">additive-symbols</span>=<span class="code-xml-attribute-value">"1000 'm', 900 'cm', 500 'd', 400 'cd', 100 'c', 90 'xc', 50 'l', 40 'xl', 10 'x', 9 'ix', 5 'v', 4 'iv', 1 'i'"</span>/&gt;
        &lt;<span class="code-xml-element-prefix">css:</span><span class="code-xml-element-local-name">counter-style</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"upper-roman"</span> <span class="code-xml-attribute-local-name">system</span>=<span class="code-xml-attribute-value">"additive"</span> <span class="code-xml-attribute-local-name">range</span>=<span class="code-xml-attribute-value">"1 3999"</span> <span class="code-xml-attribute-local-name">additive-symbols</span>=<span class="code-xml-attribute-value">"1000 'M', 900 'CM', 500 'D', 400 'CD', 100 'C', 90 'XC', 50 'L', 40 'XL', 10 'X', 9 'IX', 5 'V', 4 'IV', 1 'I'"</span>/&gt;
    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">variable</span>&gt;
    
    &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">function</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"css:custom-counter-style"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"element()?"</span>&gt;
        &lt;<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">param</span> <span class="code-xml-attribute-local-name">name</span>=<span class="code-xml-attribute-value">"name"</span> <span class="code-xml-attribute-local-name">as</span>=<span class="code-xml-attribute-value">"xs:string"</span>/&gt;
    &lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">function</span>&gt;
    
&lt;/<span class="code-xml-element-prefix">xsl:</span><span class="code-xml-element-local-name">stylesheet</span>&gt;</div></body>
</html>
